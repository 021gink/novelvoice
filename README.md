# NovelVoice - 小说语音转换器


一个专为Windows CPU环境设计的智能小说语音转换工具，支持多种文档格式，将您的小说和文档转换为高质量的中文语音。

## ✨ 核心特性

- **🎯 专为中文优化**：深度优化中文文本处理，支持少量中英混排
- **📚 多格式支持**：EPUB、PDF、TXT、MOBI等主流文档格式
- **🔊 多引擎语音合成**：集成XTTS、ChatTTS、Kokoro、CosyVoice等优质TTS引擎
- **💻 CPU友好**：专为Windows CPU环境优化，无需GPU即可运行
- **📖 智能章节处理**：自动识别小说章节结构，智能分段处理
- **🔄 断点续传**：支持任务中断后从断点继续，无需重新开始
- **🎛️ 简单易用**：提供直观的Web界面和API接口

## 🚀 快速开始

### 系统要求

- **操作系统**：Windows 10/11
- **Python版本**：3.12（必须，CosyVoice依赖限定版本）
- **磁盘空间**：10GB+（用于模型文件）

### 安装步骤

1. **克隆项目**
```bash
git clone https://github.com/021gink/novelvoice.git
cd novelvoice
```

2. **安装依赖**
```bash
python setup.py
```

3. **下载语音模型**
```bash
python download_models.py
```
> **注意**：本项目使用**ModelScope**平台下载模型，而非HuggingFace。所有模型均从ModelScope官方仓库下载。

4. **启动应用**
```bash
python main.py
```

5. **访问界面**
打开浏览器访问：`http://localhost:7860`

## 📊 支持的语音引擎

| 引擎 | 语言支持 | 特点 | 推荐场景 |
|------|----------|------|----------|
| **XTTS v2** | 16种语言 | 高质量多语言合成 | 多语言小说 |
| **ChatTTS** | 中英双语 | 对话式情感丰富 | 对话类小说 |
| **Kokoro** | 6种语言 | 轻量级快速合成 | 快速转换 |
| **CosyVoice** | 多语言 | 零样本语音克隆 | 个性化语音 |

## 📁 项目结构

```
novelvoice/
├── main.py                 # 主程序入口
├── config.py               # 配置文件
├── setup.py                # 安装脚本
├── download_models.py      # 模型下载工具
├── orchestrator/           # 任务协调模块
│   ├── orchestrator.py     # 主协调器
│   ├── ebook_processor.py  # 电子书处理器
│   ├── audio_processor.py  # 音频处理器
│   └── job_manager.py      # 任务管理器
├── workers/                # 语音引擎实现
│   ├── worker.py           # 基础工作类
│   ├── xtts_engine.py      # XTTS引擎
│   ├── chattts_engine.py   # ChatTTS引擎
│   └── ...                 # 其他引擎
├── utils/                  # 工具模块
└── models/                 # 模型文件目录
```

## 🔧 使用指南

### 基本使用

1. **上传文档**：通过Web界面上传EPUB、PDF等格式的小说文件
2. **选择语音引擎**：根据需求选择合适的语音合成引擎
3. **配置参数**：调整语音速度、音调等参数
4. **开始转换**：点击开始按钮，系统自动处理
5. **下载结果**：转换完成后下载音频文件

### 推荐：语音引擎选择指南

基于实际使用体验，为您提供以下引擎选择建议：

#### 🥇 **首选推荐：XTTS v2**
- **优势**：语音质量优秀，合成速度快，支持多语言
- **适用场景**：绝大多数小说转换场景，特别是长篇小说的批量处理
- **特点**：平衡了质量与速度，是综合表现最佳的引擎

#### 🥈 **次选推荐：ChatTTS**
- **优势**：支持随机多种音色，情感表达丰富
- **适用场景**：对话类小说、需要多样化音色的场景
- **特殊用途**：生成的WAV音频可作为XTTS、CosyVoice的克隆音色源

#### 🥉 **特定场景推荐：CosyVoice**
- **优势**：语音质量最高，支持零样本语音克隆
- **适用场景**：对质量要求极高的短文本场景
- **注意**：合成速度最慢，不推荐用于长篇小说的批量处理

#### ⚠️ **不推荐：Kokoro**
- **原因**：微调模型PT音色文件质量有限，语音质量相对较差
- **特点**：虽然合成速度最快，但质量无法满足小说转换需求

**综合排序**：XTTS > ChatTTS > CosyVoice > Kokoro  
（质量与速度的平衡 > 音色多样性 > 极致质量 > 最快速度）


## 🤝 贡献指南

欢迎提交Issue和Pull Request！贡献内容包括：
- 新的语音引擎支持
- 文档格式解析改进
- 中文文本处理优化
- 性能优化

